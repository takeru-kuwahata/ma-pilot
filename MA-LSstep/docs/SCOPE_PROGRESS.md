# Lステップ連動 経営管理・戦略シミュレーション機能 - 進捗管理表

## プロジェクト情報

- **プロジェクト名**: Lステップ連動 経営管理・戦略シミュレーション機能
- **開始日**: 2025年11月6日
- **現在フェーズ**: Phase 1 - 要件定義
- **技術スタック**: React 18 + TypeScript 5 + FastAPI + Supabase

---

## 統合ページ管理表

### 医院ユーザー向けページ

| ID | ページ名 | ルート | 権限レベル | 統合機能 | 着手 | 完了 |
|----|---------|-------|----------|---------|------|------|
| P-001 | ログイン/アカウント作成 | `/login`, `/signup` | ゲスト | ログイン、新規登録（招待経由）、パスワードリセット | [ ] | [ ] |
| P-002 | 経営ダッシュボード | `/dashboard` | 医院ユーザー全員 | KPI表示、月次推移グラフ、前月比・前年比比較、アラート通知 | [ ] | [ ] |
| P-003 | 基礎データ管理 | `/data` | 医院編集者以上 | 月次データ入力、Lステップデータ取込、立地情報入力、データ編集・削除、一括インポート | [ ] | [ ] |
| P-004 | 診療圏分析 | `/market-analysis` | 医院ユーザー全員 | 地図表示、人口統計、競合医院検索、商圏レポート生成 | [ ] | [ ] |
| P-005 | 経営シミュレーション | `/simulation` | 医院編集者以上 | 目標設定、逆算シミュレーション、戦略提案、複数シナリオ比較、履歴管理 | [ ] | [ ] |
| P-006 | レポート生成・管理 | `/reports` | 医院ユーザー全員 | テンプレート選択、期間設定、プレビュー、PDF/CSVダウンロード、過去レポート一覧 | [ ] | [ ] |
| P-007 | 医院設定・スタッフ管理 | `/settings` | 医院オーナー（一部全員） | 医院基本情報編集、スタッフ管理、通知設定、個人設定 | [ ] | [ ] |

### システム管理者向けページ

| ID | ページ名 | ルート | 権限レベル | 統合機能 | 着手 | 完了 |
|----|---------|-------|----------|---------|------|------|
| A-001 | 管理ダッシュボード | `/admin/dashboard` | システム管理者 | 登録医院数、アクティブユーザー数、全医院集計データ、利用状況グラフ、アラート | [ ] | [ ] |
| A-002 | 医院アカウント管理 | `/admin/clinics` | システム管理者 | 医院一覧、新規医院登録、医院詳細閲覧、有効化/無効化、サポート用データ閲覧・編集 | [ ] | [ ] |
| A-003 | システム設定 | `/admin/settings` | システム管理者 | 外部API設定、メール通知テンプレート管理、マスタデータ管理、システムログ閲覧 | [ ] | [ ] |

---

## Phase別進捗

### Phase 1: 要件定義（進行中）

| タスク | 状態 | 完了日 |
|--------|------|--------|
| 成果目標と成功指標の明確化 | ✅ 完了 | 2025-11-06 |
| 実現可能性調査（技術検証） | ✅ 完了 | 2025-11-06 |
| 認証・権限設計の確定 | ✅ 完了 | 2025-11-06 |
| ページ構成の決定 | ✅ 完了 | 2025-11-06 |
| 技術スタックの最終決定 | ✅ 完了 | 2025-11-06 |
| 外部サービス・APIの選定 | ✅ 完了 | 2025-11-06 |
| 要件定義書の作成 | ✅ 完了 | 2025-11-06 |
| SCOPE_PROGRESS作成 | ✅ 完了 | 2025-11-06 |
| CLAUDE.md作成 | ⏳ 進行中 | - |
| ページの深掘り | ⏳ 進行中 | - |

### Phase 2: Git/GitHub管理（未着手）

| タスク | 状態 | 完了日 |
|--------|------|--------|
| Gitリポジトリ初期化 | ⬜ 未着手 | - |
| .gitignore設定 | ⬜ 未着手 | - |
| GitHub連携 | ⬜ 未着手 | - |
| ブランチ戦略策定 | ⬜ 未着手 | - |

### Phase 3: 環境構築（未着手）

| タスク | 状態 | 完了日 |
|--------|------|--------|
| Supabaseプロジェクト作成 | ⬜ 未着手 | - |
| 外部API取得（e-Stat、RESAS、Google Maps） | ⬜ 未着手 | - |
| フロントエンド環境構築（React + TypeScript） | ⬜ 未着手 | - |
| バックエンド環境構築（FastAPI） | ⬜ 未着手 | - |
| 環境変数設定 | ⬜ 未着手 | - |

### Phase 4: データベース設計・構築（未着手）

| タスク | 状態 | 完了日 |
|--------|------|--------|
| ERD作成 | ⬜ 未着手 | - |
| マイグレーションファイル作成 | ⬜ 未着手 | - |
| Row Level Security設定 | ⬜ 未着手 | - |
| 初期マスタデータ投入 | ⬜ 未着手 | - |

### Phase 5: 実装（未着手）

各ページの実装進捗は上記「統合ページ管理表」を参照

### Phase 6: テスト（未着手）

| タスク | 状態 | 完了日 |
|--------|------|--------|
| 単体テスト作成 | ⬜ 未着手 | - |
| 統合テスト作成 | ⬜ 未着手 | - |
| E2Eテスト作成 | ⬜ 未着手 | - |

### Phase 7: デプロイ（未着手）

| タスク | 状態 | 完了日 |
|--------|------|--------|
| Vercel設定（フロントエンド） | ⬜ 未着手 | - |
| Render.com設定（バックエンド） | ⬜ 未着手 | - |
| 環境変数設定（本番） | ⬜ 未着手 | - |
| 本番デプロイ | ⬜ 未着手 | - |

---

## 機能別進捗詳細

### 認証・権限管理

| 機能 | 状態 | 担当ページ |
|------|------|----------|
| メール+パスワード認証 | ⬜ 未着手 | P-001 |
| パスワードリセット | ⬜ 未着手 | P-001 |
| 招待メール機能 | ⬜ 未着手 | P-007 |
| Row Level Security設定 | ⬜ 未着手 | Backend |

### 経営データ管理

| 機能 | 状態 | 担当ページ |
|------|------|----------|
| 月次データ入力フォーム | ⬜ 未着手 | P-003 |
| Lステップデータ取込（CSV） | ⬜ 未着手 | P-003 |
| データ編集・削除 | ⬜ 未着手 | P-003 |
| 一括インポート（CSV） | ⬜ 未着手 | P-003 |

### 可視化・分析

| 機能 | 状態 | 担当ページ |
|------|------|----------|
| 経営ダッシュボード | ⬜ 未着手 | P-002 |
| 診療圏分析（地図表示） | ⬜ 未着手 | P-004 |
| 人口統計取得（e-Stat） | ⬜ 未着手 | P-004 |
| 商圏データ取得（RESAS） | ⬜ 未着手 | P-004 |
| 競合検索（Google Maps） | ⬜ 未着手 | P-004 |

### シミュレーション

| 機能 | 状態 | 担当ページ |
|------|------|----------|
| 目標設定・逆算ロジック | ⬜ 未着手 | P-005 |
| 戦略提案生成 | ⬜ 未着手 | P-005 |
| 複数シナリオ比較 | ⬜ 未着手 | P-005 |
| シミュレーション履歴管理 | ⬜ 未着手 | P-005 |

### レポート生成

| 機能 | 状態 | 担当ページ |
|------|------|----------|
| PDF生成（WeasyPrint） | ⬜ 未着手 | P-006 |
| CSV生成 | ⬜ 未着手 | P-006 |
| レポートテンプレート管理 | ⬜ 未着手 | P-006 |
| 過去レポート一覧 | ⬜ 未着手 | P-006 |

### 管理機能

| 機能 | 状態 | 担当ページ |
|------|------|----------|
| 管理ダッシュボード | ⬜ 未着手 | A-001 |
| 医院アカウント管理 | ⬜ 未着手 | A-002 |
| システム設定管理 | ⬜ 未着手 | A-003 |

---

## マイルストーン

| マイルストーン | 目標日 | 状態 |
|--------------|--------|------|
| Phase 1: 要件定義完了 | 2025-11-06 | ⏳ 進行中 |
| Phase 2: Git/GitHub管理完了 | TBD | ⬜ 未着手 |
| Phase 3: 環境構築完了 | TBD | ⬜ 未着手 |
| Phase 4: DB設計・構築完了 | TBD | ⬜ 未着手 |
| Phase 5: MVP実装完了 | TBD | ⬜ 未着手 |
| Phase 6: テスト完了 | TBD | ⬜ 未着手 |
| Phase 7: 本番デプロイ | TBD | ⬜ 未着手 |

---

## リスク管理

| リスク | 影響度 | 対策 | 状態 |
|--------|--------|------|------|
| 外部API制限超過 | 中 | Google Maps無料枠監視、アラート設定 | ⬜ 未対応 |
| Supabase容量超過 | 中 | データ量監視、Proプラン移行準備 | ⬜ 未対応 |
| Lステップ連携の複雑化 | 低 | 手動CSV運用で開始、段階的に自動化 | ✅ 対応済 |
| 技術スタック習熟度 | 低 | Blue Lamp標準構成を採用 | ✅ 対応済 |

---

## 変更履歴

| 日付 | 変更内容 | 担当者 |
|------|---------|--------|
| 2025-11-06 | 初版作成、統合ページ管理表追加 | レコンX |

---

**最終更新**: 2025年11月6日
