# セキュリティポリシー

## サポートされるバージョン

現在セキュリティアップデートを提供しているバージョン:

| バージョン | サポート状況 |
| ------- | --------- |
| 1.0.x   | :white_check_mark: |
| < 1.0   | :x: |

---

## 脆弱性の報告

セキュリティ上の問題を発見した場合、以下の手順で報告してください。

### 報告方法

**公開せず、非公開で報告してください。**

1. **メール送信**: security@ma-pilot.local
2. **件名**: `[SECURITY] 簡潔な脆弱性の説明`
3. **本文**:
   ```
   - 脆弱性の種類（例: SQLインジェクション、XSS等）
   - 影響範囲（例: 全ユーザー、特定権限のみ等）
   - 再現手順（詳細に記載）
   - 想定される影響
   - 推奨される修正方法（あれば）
   ```

### 対応フロー

1. **24時間以内**: 受領確認メールを送信
2. **48時間以内**: 初期調査完了、重要度評価
3. **7日以内**: 修正パッチ開発・テスト
4. **14日以内**: セキュリティアップデートリリース

### 責任ある開示

- 報告後30日間は公開を控えてください
- 修正完了後、クレジット表記（希望者のみ）

---

## セキュリティアップデート方針

### 重要度分類

#### Critical（緊急）

- リモートコード実行
- SQLインジェクション
- 認証バイパス

**対応**: 24時間以内にホットフィックスリリース

#### High（高）

- XSS
- CSRF
- センシティブ情報漏洩

**対応**: 7日以内にパッチリリース

#### Medium（中）

- サービス妨害（DoS）
- 情報開示（限定的）

**対応**: 次回マイナーバージョンで修正

#### Low（低）

- 軽微な情報漏洩
- UIスプーフィング

**対応**: 次回メジャーバージョンで修正

---

## セキュリティベストプラクティス

### 開発者向け

1. **環境変数管理**
   - APIキーは`.env`ファイルで管理
   - `.env`ファイルをGitにコミットしない
   - 本番環境の秘密鍵を開発環境で使用しない

2. **認証・認可**
   - JWTトークンは短い有効期限（1時間）
   - Supabase RLSで必ずデータ分離
   - APIレベルでも権限チェック実施

3. **入力バリデーション**
   - フロントエンド・バックエンド両方で実施
   - ホワイトリスト方式を優先
   - SQLインジェクション対策（パラメータバインド）

4. **依存パッケージ**
   - 定期的に`npm audit`、`pip-audit`実行
   - 脆弱性が見つかったら即座にアップデート

### 運用者向け

1. **アクセス制御**
   - 最小権限の原則
   - 不要なアカウントは即座に削除
   - 定期的な権限レビュー

2. **ログ監視**
   - 不審なアクセスパターンを監視
   - 失敗したログイン試行を記録
   - 異常検知時はアラート

3. **バックアップ**
   - 毎日自動バックアップ
   - バックアップデータの暗号化
   - リストア手順の定期テスト

---

## 既知のセキュリティ制限

### MVP版の制限

以下の機能はMVP版では未実装です（将来実装予定）:

- [ ] 二要素認証（2FA）
- [ ] レート制限（API）
- [ ] ログローテーション
- [ ] セキュリティヘッダー強化
- [ ] WAF（Web Application Firewall）

---

## セキュリティ連絡先

- **メール**: security@ma-pilot.local
- **GitHub Security Advisory**: https://github.com/takeru-kuwahata/ma-pilot/security/advisories/new

---

## 過去のセキュリティアドバイザリ

現在、公開されているセキュリティアドバイザリはありません。

---

**最終更新**: 2025年12月26日
