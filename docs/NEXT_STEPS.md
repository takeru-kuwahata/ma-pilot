# 今後の進め方

**最終更新**: 2026-02-03

## 現在の状況

### ✅ 完了している機能
- **Phase 1-3, 5, 7-8**: 基本機能実装完了
- **フロントエンド**: 14ページ実装済み（医院向け8ページ、管理者向け3ページ、印刷物受注3ページ）
- **バックエンド**: 38エンドポイント実装済み
- **デプロイ**: Vercel（フロントエンド）+ Render（バックエンド）デプロイ完了
- **ログイン**: 正常動作確認済み（2026-02-03修正完了）

### 🎯 次のマイルストーン

**Phase 6: ヒアリングシート機能**（未実装）
- 3ページ実装（ヒアリング実施、回答管理、AI分析結果）
- AI統合（OpenAI API）
- 企業マスタ・レコメンド機能

---

## 今後の開発方針

### 選択肢1: Phase 6（ヒアリングシート機能）実装

**概要**:
- クライアント企業向けヒアリングシート機能
- AI分析による課題抽出・改善提案
- 企業マスタ管理・レコメンド機能

**必要な作業**:
1. AI API（OpenAI）の契約・設定
2. ヒアリングシート設計（質問項目・回答形式）
3. フロントエンド3ページ実装
4. バックエンドAI分析ロジック実装
5. 企業マスタデータベース設計・実装

**工数見積もり**: 2-3週間

**参考資料**:
- `docs_archive/PHASE6_IMPLEMENTATION_PLAN.md`（詳細設計）
- `docs_archive/PHASE6_AI_INTEGRATION.md`（AI統合設計）

---

### 選択肢2: 既存機能の改善・最適化

**優先度の高い改善項目**:

#### 1. パフォーマンス最適化
- [ ] ダッシュボードの初期表示速度改善
- [ ] グラフ描画の最適化
- [ ] APIレスポンスのキャッシュ戦略見直し

#### 2. UX改善
- [ ] エラーメッセージの分かりやすさ向上
- [ ] ローディング状態の視覚化
- [ ] モバイル対応の最適化

#### 3. セキュリティ強化
- [ ] アクセスログの記録
- [ ] 二要素認証（2FA）導入
- [ ] セッション管理の強化

#### 4. 運用改善
- [ ] バックアップ・復旧手順の整備
- [ ] モニタリング・アラート設定
- [ ] ドキュメントの充実化

**工数見積もり**: 各項目1-3日

---

### 選択肢3: 新規機能追加（カスタム）

現在の要件定義にない新しい機能を追加する場合：

**手順**:
1. 要件定義（どのような機能が必要か）
2. 既存システムとの関係性分析
3. 技術的実現可能性の評価
4. 実装計画策定
5. 実装・テスト

**推奨エージェント**: 拡張要件定義エンジニア（`@機能拡張`）

---

## デプロイ後の運用フロー

### 日常的な運用

#### 1. モニタリング
**Vercel（フロントエンド）**:
- https://vercel.com/dashboard
- デプロイ状況、アクセス数、エラー率を確認

**Render（バックエンド）**:
- https://dashboard.render.com
- サーバー稼働状況、ログ、メトリクスを確認

#### 2. ログ確認
**フロントエンド**:
- Vercelダッシュボード → Logs
- ブラウザのConsole（F12）

**バックエンド**:
- Renderダッシュボード → Logs
- エラーログの定期的な確認

#### 3. バックアップ
**Supabase（データベース）**:
- 自動バックアップ有効（無料プラン: 7日間保持）
- 手動バックアップ: Supabase Dashboard → Database → Backups

**コード**:
- GitHubに自動的にバックアップ
- ローカルにも定期的にpull

---

### コード変更のワークフロー

#### 1. ローカル環境での開発・テスト
```bash
# フロントエンド
cd frontend
npm run dev

# バックエンド
cd backend
source venv/bin/activate
uvicorn main:app --host 0.0.0.0 --port 8432 --reload
```

#### 2. ローカルでのテスト
- ログイン機能
- 主要なページの表示
- データの登録・更新・削除
- エラーハンドリング

#### 3. Git コミット
```bash
git add .
git commit -m "fix: ログイン機能を修正"
```

#### 4. GitHubにプッシュ
```bash
git push origin main
```

#### 5. 自動デプロイ
- Vercel: 自動的にデプロイ開始（2-3分）
- Render: GitHubプッシュで自動デプロイ（5-10分）

#### 6. 本番環境での動作確認
- https://ma-pilot.vercel.app でログインテスト
- 主要機能の動作確認

---

### トラブル発生時の対応フロー

#### Step 1: 問題の切り分け
- フロントエンドの問題か、バックエンドの問題か
- 特定のユーザーのみか、全ユーザーか
- 特定の機能のみか、システム全体か

#### Step 2: ログ確認
- ブラウザConsole（F12）
- Vercel Logs
- Render Logs

#### Step 3: 緊急度の判断
**クリティカル（即座に対応）**:
- ログインできない
- 全ページが表示されない
- データが完全に消失

**高（数時間以内に対応）**:
- 特定機能が使えない
- パフォーマンス著しく低下

**中（1-2日以内に対応）**:
- 一部のデータ表示エラー
- UI/UXの問題

**低（次回アップデート時に対応）**:
- 軽微な表示崩れ
- 非critical な機能の不具合

#### Step 4: 対応
1. 問題の原因特定
2. ローカル環境で修正・テスト
3. Git コミット・プッシュ
4. 本番環境で動作確認

#### Step 5: ドキュメント更新
- `docs/TROUBLESHOOTING.md` に対応内容を追記
- 再発防止策を記録

---

## ドキュメント管理

### 現役ドキュメント（`docs/`）
常に最新の状態を保つ：
- `requirements.md`: 要件定義（未実装機能のみ）
- `SCOPE_PROGRESS.md`: 進捗管理
- `TROUBLESHOOTING.md`: トラブルシューティング
- `NEXT_STEPS.md`: このファイル（今後の進め方）
- `DEVELOPER_TEST_CHECKLIST.md`: 検証チェックリスト

### アーカイブ（`docs_archive/`）
実装完了済みの詳細設計・調査資料：
- Phase 6未実装機能の詳細設計
- 実装完了済みの詳細設計（API仕様、DB設計等）
- 調査資料・事例研究

**原則**: 実装完了後は詳細設計をアーカイブに移動し、コードを真実源とする

---

## 推奨される次のアクション

### 短期（1週間以内）
1. [ ] 本番環境での全機能動作確認（`DEVELOPER_TEST_CHECKLIST.md`使用）
2. [ ] 発見されたバグの修正
3. [ ] ユーザーフィードバックの収集

### 中期（1ヶ月以内）
1. [ ] パフォーマンス最適化
2. [ ] UX改善
3. [ ] ドキュメント充実化
4. [ ] Phase 6実装の要否検討

### 長期（3ヶ月以内）
1. [ ] Phase 6実装（必要な場合）
2. [ ] 新規機能追加検討
3. [ ] スケーラビリティ改善
4. [ ] セキュリティ監査

---

## サポート・問い合わせ

### 技術的な質問
- Claude Code（このツール）で相談
- 拡張要件定義エージェント（`@機能拡張`）で新機能検討

### ドキュメント
- `docs/TROUBLESHOOTING.md`: よくある問題と解決方法
- `docs/requirements.md`: 要件定義
- `docs_archive/`: 詳細設計（参考用）

---

**このドキュメントは定期的に更新してください。最新の状況を反映することが重要です。**
