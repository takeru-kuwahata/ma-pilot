# アクセシビリティチェックリスト

このチェックリストは、新機能の実装やコンポーネント作成時に、アクセシビリティ要件を満たしているか確認するためのものです。

## 一般的なチェック項目

### セマンティックHTML

- [ ] 適切なHTML要素を使用している（`<button>`、`<a>`、`<nav>`等）
- [ ] 見出しレベルが正しい階層になっている（`<h1>`→`<h2>`→`<h3>`）
- [ ] ランドマークロールが適切に使用されている（`<header>`、`<nav>`、`<main>`、`<footer>`）
- [ ] リストには`<ul>`/`<ol>`/`<li>`を使用している
- [ ] テーブルには適切なマークアップ（`<table>`、`<thead>`、`<tbody>`、`<th>`）を使用している

### ARIA属性

- [ ] すべてのボタンに`aria-label`または視覚的なテキストがある
- [ ] フォーム要素に`aria-required`が設定されている（必須の場合）
- [ ] エラー状態に`aria-invalid`が設定されている
- [ ] エラーメッセージに`aria-describedby`でリンクされている
- [ ] ダイアログに`aria-labelledby`と`aria-describedby`が設定されている
- [ ] トグルボタンに`aria-pressed`が設定されている
- [ ] 展開可能な要素に`aria-expanded`が設定されている
- [ ] モーダルに`aria-modal="true"`が設定されている

### キーボード操作

- [ ] すべてのインタラクティブ要素がTabキーでフォーカス可能
- [ ] フォーカス順序が論理的である
- [ ] フォーカストラップがモーダル/ダイアログに実装されている
- [ ] Escキーでモーダル/ダイアログが閉じる
- [ ] Enter/Spaceキーでボタンが実行される
- [ ] 矢印キーでリスト/メニュー内を移動できる
- [ ] スキップリンクが実装されている

### フォーカス表示

- [ ] フォーカス時に明確な視覚的インジケーターがある
- [ ] フォーカスインジケーターのコントラスト比が3:1以上
- [ ] `outline: none`を使用している場合、代替のフォーカススタイルがある
- [ ] カスタムフォーカススタイルが`:focus-visible`を使用している

### カラーとコントラスト

- [ ] テキストと背景のコントラスト比が4.5:1以上（通常サイズ）
- [ ] テキストと背景のコントラスト比が3:1以上（大きいサイズ：18pt以上）
- [ ] UIコンポーネントのコントラスト比が3:1以上
- [ ] 色だけで情報を伝えていない（形、テキスト、アイコンも併用）
- [ ] リンクがテキストと区別できる（下線、アイコン等）

### 画像と代替テキスト

- [ ] すべての画像に`alt`属性がある
- [ ] 装飾的な画像は`alt=""`を使用している
- [ ] 意味のある画像には説明的な`alt`テキストがある
- [ ] アイコンボタンに`aria-label`がある
- [ ] SVGアイコンに`aria-hidden="true"`がある（装飾的な場合）

## フォーム

### ラベルとインプット

- [ ] すべてのフォーム要素に視覚的なラベルがある
- [ ] `<label>`要素が`for`属性でインプットに関連付けられている
- [ ] プレースホルダーだけをラベルとして使用していない
- [ ] 必須フィールドに`required`属性と`aria-required="true"`がある
- [ ] 必須フィールドが視覚的に識別できる（*マーク等）

### エラーハンドリング

- [ ] エラーメッセージが明確で具体的
- [ ] エラーメッセージがプログラム的に関連付けられている（`aria-describedby`）
- [ ] エラーフィールドに`aria-invalid="true"`が設定されている
- [ ] エラーが発生したらスクリーンリーダーに通知される（`role="alert"`）
- [ ] フォーカスがエラーフィールドに移動する

### バリデーション

- [ ] リアルタイムバリデーションが邪魔にならない
- [ ] 送信前にエラーサマリーが表示される
- [ ] バリデーションルールが明示されている

## インタラクティブコンポーネント

### ボタン

- [ ] `<button>`要素を使用している（`<div>`にonClickではない）
- [ ] ボタンの目的が明確（テキストまたは`aria-label`）
- [ ] 無効状態が視覚的に区別できる
- [ ] 無効状態に`disabled`属性がある
- [ ] アイコンのみのボタンに`aria-label`がある

### リンク

- [ ] `<a>`要素を使用している
- [ ] `href`属性が設定されている
- [ ] リンクテキストが目的地を説明している
- [ ] 外部リンクに視覚的インジケーターがある
- [ ] "こちら"、"クリック"等の曖昧なテキストを避けている

### モーダル/ダイアログ

- [ ] `role="dialog"`が設定されている
- [ ] `aria-modal="true"`が設定されている
- [ ] `aria-labelledby`でタイトルが関連付けられている
- [ ] `aria-describedby`で説明が関連付けられている
- [ ] フォーカストラップが実装されている
- [ ] Escキーで閉じる
- [ ] 閉じた後、元の要素にフォーカスが戻る
- [ ] 背景のコンテンツがスクリーンリーダーから隠されている

### ドロップダウン/メニュー

- [ ] `role="menu"`または`role="listbox"`が設定されている
- [ ] `aria-expanded`で状態が示されている
- [ ] 矢印キーで項目間を移動できる
- [ ] Enterキーで項目を選択できる
- [ ] Escキーで閉じる

### タブ

- [ ] `role="tablist"`, `role="tab"`, `role="tabpanel"`が設定されている
- [ ] `aria-selected`で選択状態が示されている
- [ ] `aria-controls`でパネルが関連付けられている
- [ ] 矢印キーでタブ間を移動できる
- [ ] 非表示のパネルに`hidden`属性がある

## 動的コンテンツ

### ライブリージョン

- [ ] 動的な更新に`aria-live`が設定されている
- [ ] 重要な通知に`aria-live="assertive"`を使用
- [ ] 一般的な更新に`aria-live="polite"`を使用
- [ ] ステータスメッセージに`role="status"`を使用
- [ ] エラーメッセージに`role="alert"`を使用

### ローディング状態

- [ ] ローディング中に視覚的インジケーターがある
- [ ] `aria-busy="true"`が設定されている
- [ ] ローディングメッセージがスクリーンリーダーに通知される
- [ ] ローディング完了がスクリーンリーダーに通知される

## テスト

### 自動テスト

- [ ] axe-coreで問題が検出されない
- [ ] ESLintで`jsx-a11y`の警告がない
- [ ] Lighthouseのアクセシビリティスコアが90以上

### 手動テスト - キーボード

- [ ] Tabキーですべての機能にアクセスできる
- [ ] フォーカス順序が論理的
- [ ] フォーカスが視覚的に明確
- [ ] マウスを使わずにタスクを完了できる

### 手動テスト - スクリーンリーダー

- [ ] VoiceOver/NVDAでページを読み上げられる
- [ ] 見出し構造が論理的
- [ ] フォームが理解しやすい
- [ ] エラーメッセージが読み上げられる
- [ ] 動的な変更が通知される

### 手動テスト - 拡大表示

- [ ] 200%ズームで機能が維持される
- [ ] 横スクロールが発生しない
- [ ] テキストが切れていない
- [ ] ボタンがクリック可能

### 手動テスト - カラー

- [ ] コントラスト比チェッカーで確認済み
- [ ] グレースケールで情報が伝わる
- [ ] 色覚シミュレーターで確認済み

## モバイル

- [ ] タッチターゲットのサイズが44x44px以上
- [ ] タッチターゲット間に十分な間隔がある
- [ ] ズーム機能が有効（`user-scalable=no`を使用しない）
- [ ] 横向きでも機能する
- [ ] 片手操作で主要機能にアクセスできる

## 特殊なケース

### データテーブル

- [ ] `<table>`要素を使用している
- [ ] `<th>`要素に`scope`属性がある
- [ ] 複雑なテーブルに`<caption>`がある
- [ ] ソート可能なカラムに`aria-sort`がある

### チャート/グラフ

- [ ] 代替テキストまたはテーブル形式のデータがある
- [ ] `role="img"`と`aria-label`が設定されている
- [ ] 色だけで区別していない（パターン、ラベル等も使用）

### ビデオ/オーディオ

- [ ] キャプション/字幕がある
- [ ] トランスクリプトがある
- [ ] 自動再生を避けている
- [ ] コントロールがキーボードでアクセス可能

## ドキュメント

- [ ] アクセシビリティ関連のコメントが記載されている
- [ ] 複雑なARIA実装に説明がある
- [ ] 既知の問題と対応計画が記録されている

## レビュー前チェック

実装完了後、プルリクエストを作成する前に以下を確認してください：

- [ ] このチェックリストの該当項目をすべて確認した
- [ ] 自動テスト（axe、ESLint、Lighthouse）を実行した
- [ ] キーボードのみで操作をテストした
- [ ] スクリーンリーダーでテストした（可能であれば）
- [ ] 200%ズームでテストした
- [ ] コントラスト比を確認した

## リソース

- [WCAG 2.1 Quick Reference](https://www.w3.org/WAI/WCAG21/quickref/)
- [WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)
- [WebAIM Checklist](https://webaim.org/standards/wcag/checklist)
- [A11y Project Checklist](https://www.a11yproject.com/checklist/)

## プルリクエストテンプレート

プルリクエストには以下を含めてください：

```markdown
## アクセシビリティチェック

- [ ] ARIA属性を適切に設定
- [ ] キーボード操作をテスト
- [ ] フォーカス管理を実装
- [ ] カラーコントラストを確認
- [ ] スクリーンリーダーでテスト（可能であれば）
- [ ] axe-core / Lighthouseでテスト
- [ ] 既知の問題: （あれば記載）
```
